# ูุจโุณุงุช ุฎุฏูุงุช ุณุฆู ุฑู Cloudflare Workers (D1 Edition)

ุงู ฺฉ ูพุฑูฺู ฺฉุงูู ุจุฑุง ุณุงุฎุช ฺฉ ูุจโุณุงุช ุฎุฏูุงุช ุณุฆู ุงุณุช ฺฉู ุจู ุทูุฑ ฺฉุงูู ุฑู ุฒุฑุณุงุฎุช Edge ุดุฑฺฉุช Cloudflare (ุจุง ุงุณุชูุงุฏู ุงุฒ Workers ู **D1 Database**) ุงุฌุฑุง ูโุดูุฏ. ุงู ูพุฑูฺู ุจุง ุชูุฑฺฉุฒ ุจุฑ ุณุฑุนุชุ ุณุฆูุ ูพุงุฏุงุฑ ู ูุนูุงุฑ ูุฏุฑู ุฌุงูุงุงุณฺฉุฑูพุช (ESM) ุณุงุฎุชู ุดุฏู ู **ฺฉุงููุงู ุจุง ูพูู ุฑุงฺฏุงู Cloudflare ุณุงุฒฺฏุงุฑ ุงุณุช.**

## โจ ูฺฺฏโูุง

- **ุงุฌุฑุง ุฑู Edge:** ุณุฑุนุช ุจุณุงุฑ ุจุงูุง ุจุง ุงุณุชูุงุฏู ุงุฒ Cloudflare Workers.
- **ูพุงฺฏุงู ุฏุงุฏู SQL:** ุงุณุชูุงุฏู ุงุฒ **Cloudflare D1** ุจุฑุง ูุฏุฑุช ูุญุชูุง ุณุงุฎุชุงุฑุงูุชู (ูพุณุชโูุงุ ฺฉุงุฑุจุฑุงู).
- **ุฑูุฏุฑ ุณูุช ุณุฑูุฑ (SSR):** ุชูุงู ุตูุญุงุช ุจู ุทูุฑ ฺฉุงูู ุฏุฑ ุณูุช ุณุฑูุฑ ุฑูุฏุฑ ูโุดููุฏ ฺฉู ุจุฑุง ุณุฆู ุงุฏูโุขู ุงุณุช.
- **ุจูููโุณุงุฒ ุณุฆู:** ูพุดุชุจุงู ฺฉุงูู ุงุฒ ูุชุง ุชฺฏโูุง ุฏุงูุงูฺฉุ Canonical URLุ OpenGraph ู ุชููุฏ ุฎูุฏฺฉุงุฑ `sitemap.xml` ู `robots.txt`.
- **ูพูู ูุฏุฑุช:** ฺฉ ุฏุงุดุจูุฑุฏ ุณุงุฏู ู ุงูู ุจุฑุง ูุฏุฑุช ูพุณุชโูุง ูุจูุงฺฏ (CRUD).
- **ุชุณุชโูุง ุฎูุฏฺฉุงุฑ:** ุดุงูู ูุฌููุนูโุง ุงุฒ ุงุณฺฉุฑูพุชโูุง ุจุฑุง ุชุณุช ุงุชุตุงู ุจู ุฏุชุงุจุณุ schemaุ ู ุนููุงุช CRUD ูุจู ุงุฒ deploy.
- **ูุนูุงุฑ ูุงฺููุงุฑ:** ฺฉุฏูุง ุจู ุตูุฑุช ุชูุฒ ุฏุฑ ูพูุดูโูุง ุฌุฏุงฺฏุงูู ุณุงุฒูุงูุฏู ุดุฏูโุงูุฏ.
- **ุขูุงุฏู Deploy:** ูพุฑูฺู ฺฉุงููุงู ูพฺฉุฑุจูุฏ ุดุฏู ู ุขูุงุฏู `wrangler publish` ุงุณุช.

## ๐๏ธ ูพุดุชู ููุงูุฑ (Tech Stack)

- **ูุญุท ุงุฌุฑุง:** Cloudflare Workers
- **ูพุงฺฏุงู ุฏุงุฏู:** **Cloudflare D1**
- **ูุณุฑุงุจ (Routing):** `itty-router`
- **ููุชูุฑ ูุงูุจ (Template Engine):** `eta`
- **ุงุจุฒุงุฑ Deploy:** `wrangler` CLI
- **ุทุฑุงุญ:** TailwindCSS (ุงุฒ ุทุฑู CDN)

## ๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุงู ูพุฑูฺูุ ูุฑุงุญู ุฒุฑ ุฑุง ุฏูุจุงู ฺฉูุฏ.

### ฑ. ูพุดโูุงุฒูุง

- [Node.js](https://nodejs.org/) (ูุณุฎู 18.x ุง ุจุงูุงุชุฑ)
- [NPM](https://www.npmjs.com/)
- ูุตุจ `wrangler` CLI ู `jq`:
  ```bash
  npm install -g wrangler
  # jq is used by test scripts. On macOS/Linux:
  # brew install jq
  # sudo apt-get install jq
  ```
- ูุงฺฏู ุจู ุญุณุงุจ Cloudflare:
  ```bash
  wrangler login
  ```

### ฒ. ูุตุจ ูพุฑูฺู

1.  ูพุฑูฺู ุฑุง ฺฉููู ฺฉุฑุฏู ู ูุงุจุณุชฺฏโูุง ุฑุง ูุตุจ ฺฉูุฏ:
    ```bash
    git clone <repository_url>
    cd cloudflare-seo-site-d1
    npm install
    ```

### ณ. ูพฺฉุฑุจูุฏ ูพุงฺฏุงู ุฏุงุฏู D1

ุงู ูพุฑูฺู ุงุฒ D1 ุจุฑุง ุฐุฎุฑู ูพุณุชโูุง ุงุณุชูุงุฏู ูโฺฉูุฏ.

1.  **ุงุฌุงุฏ ุฏุชุงุจุณ ูพุฑูุฏุงฺฉุดู:**
    ```bash
    wrangler d1 create seo_db
    ```
    `database_id` ุฑุง ุงุฒ ุฎุฑูุฌ ฺฉูพ ฺฉุฑุฏู ู ุฏุฑ `wrangler.toml` ุฏุฑ ุจุฎุด `database_id` ูุฑุงุฑ ุฏูุฏ.

2.  **ุงุนูุงู Schema:**
    ```bash
    wrangler d1 execute seo_db --file=./db/schema.sql
    ```

3.  **(ุงุฎุชุงุฑ) ุงุถุงูู ฺฉุฑุฏู ุฏุงุฏูโูุง ุงููู (Seed):**
    ```bash
    wrangler d1 execute seo_db --file=./db/seed.sql
    ```

### ด. ุชูุธู ูุชุบุฑูุง ุงููุช (Secrets)

ุจุฑุง ูพูู ูุฏุฑุชุ ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุฑุง ุจู ุตูุฑุช ุงูู ุชุนุฑู ฺฉูุฏ:

```bash
wrangler secret put ADMIN_USER
# ุณูพุณ ูุงู ฺฉุงุฑุจุฑ ููุฑุฏ ูุธุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ

wrangler secret put ADMIN_PASS
# ุณูพุณ ุฑูุฒ ุนุจูุฑ ููุฑุฏ ูุธุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ
```

### ต. ุงุฌุฑุง ูุญู ู ุชุณุช

1.  **ุงุฌุฑุง ุณุฑูุฑ ุชูุณุนู:**
    ```bash
    npm start
    ```
    ุณุงุช ุฑู `http://localhost:8787` ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ. ูพุงฺฏุงู ุฏุงุฏู ูุญู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุชูุณุท wrangler ุงุฌุงุฏ ู ูุฏุฑุช ูโุดูุฏ.

2.  **ุขูุงุฏูโุณุงุฒ ุฏุชุงุจุณ ูุญู:**
    ุฏุฑ ฺฉ ุชุฑููุงู ุฏฺฏุฑุ schema ู seed ุฑุง ุฑู ุฏุชุงุจุณ ูุญู ุงุนูุงู ฺฉูุฏ:
    ```bash
    npx wrangler d1 execute seo_db --local --file=./db/schema.sql
    npx wrangler d1 execute seo_db --local --file=./db/seed.sql
    ```

3.  **ุงุฌุฑุง ุชุณุชโูุง:**
    ุจุฑุง ุงุทููุงู ุงุฒ ุตุญุช ุนููฺฉุฑุฏ ุฏุชุงุจุณุ ุงุณฺฉุฑูพุชโูุง ุชุณุช ุฑุง ุงุฌุฑุง ฺฉูุฏ:
    ```bash
    bash tests/test-db-connection.sh
    bash tests/test-db-schema.sh
    bash tests/test-db-crud.sh
    ```

### ถ. Deploy ููุง

ูพุณ ุงุฒ ุงูฺฉู ุชูุงู ุชูุธูุงุช ุฑุง ุงูุฌุงู ุฏุงุฏุฏุ ุจุง ุฏุณุชูุฑ ุฒุฑ ูพุฑูฺู ุฑุง ุฑู Cloudflare ููุชุดุฑ ฺฉูุฏ:

```bash
npm run deploy
```
ุง
```bash
wrangler deploy
```
ูพุณ ุงุฒ ฺูุฏ ุซุงููุ ูุจโุณุงุช ุดูุง ุฑู ุฏุงููู `*.workers.dev` ุดูุง ูุนุงู ุฎูุงูุฏ ุดุฏ.
